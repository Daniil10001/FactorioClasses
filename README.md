# SIBIRIO

Это бибилоткеа и игра, позволяющая создать свою версию лучшего в мире завода!

Сейчас доступны только базовые постройки и стандартный интерфейс для взаимодействия с ними, но планируется в дальнейшем расширить его, чтобы увеличить гибкость внешней добавления внешних модификаций.

Сборка
-------------------------------------
Для Linux систем. MacOS сам подтягивает пакеты, вроде(если что просто сами доустановите).
```
sudo apt-get update && sudo apt-get install -y libxrandr-dev libxcursor-dev libxi-dev libudev-dev libflac-dev libvorbis-dev libgl1-mesa-dev libegl1-mesa-dev libfreetype-dev
```

Сборка
```
mkdir build && cd build
cmake ..
make
```


Управление
---------------------------------------
W,A,S,D и стрелочки - перемещение

[ , ] - управлене размером файла

R - поворот здания.

ПКМ по постройке показывает е инвентарь

С помощью кнопок на экране размещаются и удаляются объекты

Струкутра проекта и важные файлы:
--------------------------------------
- src - исходные файлы
- - interectioninterfaces - как и говорит название файла здесь описываются общие типы, необходимые для взаимодействия различных классов.
- - jsoncomunication - файл, описывающий, как мы взаимодействуем с json объектами, а также содержащий ытатические классы, хранящие ресурсы, загруженные в память.
- - objectparametrhandler - страшная вещь. Заходите туда только, елси в ы не боитесь вычислений на constexpr, засовываний строк в template и магии brace initialization. Там находится статическая проверка того, что класс содержит определенный параметр.
- - building - описывает работу здания в общем виде и объекта Dummy, необходимого для поддержания зависимостей. Там же находится класс, описывающий вершину графа(о ней ниже).
- - sessionlogic - отвечает за логику карты без ***SFML*** для проверки на утечки памяти
- - window - чистое отображение
- include - хедеры внешних библиотек
- resources
- - include - графические ресурс
- - config - типы построек и материаллов
- - fonts - шрифты

О создании своих построек
------------------------------------------
Для создания своей посторйки/изменения текущих необходимо зайти в папку resourses/config. Там есть файл "items.json". В нём указаны пути до файлов объектов относительно папки ресурсов рядом с самой игрой, id объектов в сиситеме, а также их класс. Далее в папке с конфигурацией конкретного объекта:

- main.json описыает главные характеристики
- - полное описание будет чуть позже
- production.json - здесь для всех типов фабрик описываются рецепты. Небходимо указать id рецепта(не как ни связано с id построек и может спокойно перекрывать их), количество ячеек в постройке для него. И в конце указать id ресурсов и их расход. Для производимых расход со знаком минуса. Указывать сначала расходники, а потом производимые!


О поддержке соединения между постройками. Построение графа завода
------------------------------------------
Класс Connection позволяет поддерживать связь между различными посторйками. На данный момент существует два типа связи:

1) Standart - стандартная связь между объектами, позволяющая понять занимет ли какую-либо точку взаимодействия другаю постройка. Это нужно для их своевременного восстановления и проверки на то, что вообще здания имеют правильное соединение

2) Chain - связь между объектами, использующаяся для базового взаимодействия получения и отправки материаллов/команд. В связи с тем, что данные значения не упорядочены советуется заранее продумать способ работы, когда соединение идёт к нескольким объектам по одному направлению

Направления:

1) Из ( From ) - указывает на то, что есть "поступающая связь откуда-то на объект". То есть что-то идёт от внешнего объекта к этому

2) В ( To ) - указывает на то, есть ли "передающая связь из объекта куда-то".

По этим связям можно проверять цепчки производства и аналитически считать расход материаллов. Также можно проверять как идут ресурсы до "Запуска завода".